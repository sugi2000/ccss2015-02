<html>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.7/p5.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.7/addons/p5.dom.js"></script>

<!--
<script type="text/javascript" src="lib/p5.min.js"></script>
<script type="text/javascript" src="lib/p5.dom.min.js"></script>
-->

<script>

function setup() {

  var div = createDiv('');

  var input = createInput('ABC')
    .parent(div);

  $(input.elt).change(function() {
    alert(this.value);
  });

  createButton('Create Images')
    .parent(div)
    .mouseClicked(createImages);

  createButton('Download Images')
    .parent(div)
    .mouseClicked(downloadImages);

  //createCanvas(200 * 95, 200);
  //background(0);
}

function draw() {
}

function createImages() {
  //var gs = {};
  for (var i = 32; i <= 126; i++) {
    textSize(200 * 0.9);
    textFont("Helvetica");
    var letter = char(i);
    var letterWidth = textWidth(letter);
    //g = gs[i - 32] = createGraphics(letterWidth, 200);
    //g = gs[letter] = createGraphics(letterWidth, 200);
    var g = createGraphics(letterWidth, 200);
    g.id(letter);
    g.background(0);
    g.fill(255);
    g.noStroke();
    //g.noSmooth();
    g.textSize(g.height * 0.9);
    g.textFont("Helvetica");
    g.textAlign(CENTER);
    g.text(letter, g.width / 2, g.height * 0.9 * 0.8);
    g.style('display', 'inline'); // make hidden canvas visible
  }
}

function downloadImages() {
  for (var i = 32; i <= 126; i++) {
    saveCanvas(select('#' + char(i)), i.toString(), 'png');
  }
}

</script>
</html>
