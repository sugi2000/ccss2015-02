<html>
<script type="text/javascript" src="lib/p5.min.js"></script>

<script>
var imgs = {};
var currentImage;

function preload() {
  for (var i = 32; i <= 126; i++) {
    imgs[i.toString()] = loadImage("assets/" + i.toString() + ".png");
  }
}

function setup() {
  createCanvas(600, 600);
  background(0);
  noStroke();
  rectMode(CENTER);
  ellipseMode(CENTER);
}

function draw() {
  if (!currentImage) { return; }

  for (var i = 0; i < 24; i++) {
    for (var j = 0; j < 24; j++) {
      var x = (i + 0.5) * width / 24;
      var y = (j + 0.5) * height / 24;
      var c = currentImage.get(x * currentImage.width / width, y * currentImage.height / height);
      fill(c);
      ellipse(x, y, width / 24, height / 24);
      //rect(x, y, width / 24, height / 24);
    }
  }

}

function draw_() {
  if (!currentImage) { return; }

  for (var i = 0; i < 100; i++) {
    var x, y;
    x = random(width);
    y = random(height);
    var c = currentImage.get(x * currentImage.width / width, y * currentImage.height / height);

    fill(c);
    ellipse(x, y, 10, 10);
  }
}

function keyTyped() {
  var code = unchar(key);
  if (code >= 32 && code <= 126) {
    currentImage = imgs[code.toString()];
    background(0);
  }
  return false; // prevent any default behavior
}

</script>
</html>
